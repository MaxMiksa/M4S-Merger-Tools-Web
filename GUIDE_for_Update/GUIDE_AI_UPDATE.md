# AI 更新指引

本文件用于指导未来接手项目的 AI：需要自动生成或维护哪些文件？哪些文件需要中英双语？更新时应遵循什么规则？

## 示例文件夹（其中包含需要自动更新的文件的成品demo）：GUIDE_for_Update/

## 必须维护 / 自动更新的文件

| 文件 | 作用 | 语言要求 | 更新规则简述 |
| :--- | :--- | :--- | :--- |
| `README.md` | 面向中文用户的主说明文档。 | 中文为主，若包含版本说明表格则需提供双语内容。 | 保持版本号、截图/GIF 路径与发布说明同步最新版本。每次发版必须在“使用说明”附近插入新的版本总结（中文）。 |
| `README-en.md` | README 的英文镜像。 | 英文，若 README 中出现双语表格需在此处提供英文版。 | 结构须与中文 README 对应，确保包含英文版的发布说明表格与版本信息。 |
| `CHANGELOG.md` | 中文版详细更新日志。 | 中文。 | 每个版本追加编号的“功能”章节，内容包括：功能总结、解决的痛点、详细变更、技术实现细节。 |
| `CHANGELOG-en.md` | 英文版详细更新日志。 | 英文。 | 与中文 changelog 一一对应，使用 “Feature” 章节并保持顺序一致。 |
| `RELEASE_NOTE.md` | 面向用户的易读版本说明（单份文档中英双语）。 | 中文 + 英文，先中文后英文。 | 每次发版在文档顶部插入新条目：标题、简短描述、双语表格。 |
| `AI_UPDATE_GUIDE.md`（本文件） | 说明 AI 需要遵循的更新流程。 | 中文即可，必要时补充英文注释。 | 若流程发生变化（新增文件、语言要求调整等）须更新此文档。 |

## 每次发版时必须执行的动作

1. **版本号同步**：更新 README 标题、构建脚本、PyInstaller spec 等所有出现版本号的位置。除非用户提供新素材，否则无需更新截图/GIF。
2. **根据“GUIDE_for_Update”中的GUIDE要求，更新以下文件：**
   (1) **README 版本表格**：检查文本内容若有过时、错误内容则改掉。
   (2) **Changelog 章节**：在中英文 changelog 中分别新增对应章节，严格使用“四段式”结构（总结 / 痛点 / 变更详情 / 技术实现）。
   (3) **Release Note**：在 `RELEASE_NOTE.md` 顶部追加新条目（简短描述 + 中英文表格）。
3. **引用准确性**：若说明中提到行号或文件路径，需确认变更后仍然正确。
4. **双语对齐**：修改中文文档后，检查英文文档是否同步；反之亦然。


## 相关文件说明

### README 结构说明

中英文 README 均应遵循相同骨架（1-6和11必须有，7-10和12看情况）：

1. **标题**：`# M4S 合并工具 vX.Y.Z | [For English](...)`（英文版对应英文标题）。
2. **卖点摘要**：带勾选或 emoji 的 1～2 行宣传语。
3. **产品简介段**：简短介绍用途/来源。
4. **演示区块**：`<div align="center">` 中包含左右两张截图。
5. **“功能特性 / Features”**表格：左列特性(含 emoji+粗体)，右列描述。
6. **“使用 / Usage”章节**：
   - 动图展示。
   - “基本操作流程”四步列表。
   - “输出文件说明”段落。
7. **“系统要求 / System Requirements”**列表。
8. **“安装 / Installation”**：含“推荐”步骤及多个 `<details>` 折叠（通过源代码运行、自动安装、手动安装等）。
9. **“注意事项 / Notes”**列表。
10. **“其他 / Others”**折叠，涵盖打包、错误处理、FAQ、技术细节、许可、贡献。
11. **联系方式**。
12. **版本发布表格**：位于动图下方，三列表格列出最新版本的中英文摘要（保持双语）。

英文 README 需用英文标题/段落，但若中文 README 含双语表格，英文版应提供等价内容。

### CHANGELOG 结构说明

只有被明确要求更新相关文件时，两份 changelog 才需要更新且必须并行更新，结构如下：

1. `## vX.Y.Z – {主题}`：中文标题；英文版使用英文标题（版本号由用户提供）。
2. 每个版本包含若干 `### 功能 N：...`（或 `### Feature N: ...`）。
3. 每个功能段落固定四部分：
   - **总结 / Summary**
   - **解决的痛点 / Pain Points**
   - **功能变更详情 / Change Details**
   - **技术实现细节 / Technical Implementation**
4. 若调整不属于功能，也应按同样格式描述。
5. 中英文两个文件的功能数量、顺序、内容需一一对应。

### RELEASE_NOTE 结构说明

1. 文档顶部说明用途，并始终把最新版本条目放在最前。
2. 每个版本条目包含两段：
   - `## ✨ Version X.Y.Z`：加粗中文亮点标题、一句简洁描述、一张两列中文表格（类别/详细内容）。
   - `## ✨ Version X.Y.Z`：英文标题、英文描述、英文表格。
3. 文字务求通俗，避免技术术语；中英文表格行数保持一致。
4. 新版本追加在最前，其余历史条目按时间倒序排列。

## 对未来 AI 的工作提示

- 凡是影响用户体验或行为的改动，完成后立即记下要点，方便写入下一版 changelog / release note。
- 善用 `rg`、`python` 辅助定位版本号、表格或重复描述，避免遗漏。
- 优先使用 `apply_patch` 进行修改，保证 diff 干净且易于审阅。
- 完成任务前运行 `git status -sb`，确认所有应改文件（尤其是中英成对的文档）都已更新。

遵循以上规则，后续 AI 便能在多语言环境中保持文档与版本记录的准确性。
